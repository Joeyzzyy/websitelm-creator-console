import{_ as x,r as R,o as A,a as h,c as b,b as a,w as n,F as U,d as u,e as P,f as r,g as d,t as m,h as S,i as _,j as k,k as v,n as C}from"./index.3dd1b234.js";import{i as L,s as I,a as j}from"./intercom.2debaa95.js";const q={name:"LoginPage",data(){return{form:{email:"",password:""},rememberMe:!1,loading:!1,isLogin:!0,isForgotPassword:!1,registerForm:{email:"",code:"",password:"",confirmPassword:""},cooldown:0,cooldownTimer:null,resetForm:{email:"",code:"",newPassword:"",confirmPassword:""},showSetPasswordModal:!1,setPasswordLoading:!1,setPasswordForm:{newPassword:"",confirmPassword:""}}},setup(){const o=R(null);A(()=>{o.value&&clearInterval(o.value)})},async created(){if(localStorage.getItem("intelickIsLoggedIn")&&localStorage.getItem("accessToken"))try{this.$router.push("/")}catch{localStorage.removeItem("intelickIsLoggedIn"),localStorage.removeItem("accessToken")}L()},computed:{forgotPasswordStrength(){const o=this.isForgotPassword?this.resetForm.newPassword:this.registerForm.password;if(!o)return"";let e=0;switch(o.length>=8&&e++,/[A-Z]/.test(o)&&e++,/[a-z]/.test(o)&&e++,/\d/.test(o)&&e++,e){case 4:return"Strong";case 3:return"Medium";default:return"Weak"}},passwordStrength(){const o=this.registerForm.password;if(!o)return"";let e=0;switch(o.length>=8&&e++,/[A-Z]/.test(o)&&e++,/[a-z]/.test(o)&&e++,/\d/.test(o)&&e++,e){case 4:return"Strong";case 3:return"Medium";default:return"Weak"}},passwordStrengthClass(){return{Strong:"strength-strong",Medium:"strength-medium",Weak:"strength-weak"}[this.passwordStrength]||""},forgotPasswordStrengthClass(){return{Strong:"strength-strong",Medium:"strength-medium",Weak:"strength-weak"}[this.forgotPasswordStrength]||""},setPasswordStrength(){const o=this.setPasswordForm.newPassword;if(!o)return"";let e=0;switch(o.length>=8&&e++,/[A-Z]/.test(o)&&e++,/[a-z]/.test(o)&&e++,/\d/.test(o)&&e++,e){case 4:return"Strong";case 3:return"Medium";default:return"Weak"}},setPasswordStrengthClass(){return{Strong:"strength-strong",Medium:"strength-medium",Weak:"strength-weak"}[this.setPasswordStrength]||""}},methods:{async handleGoogleLogin(){try{const o=await h.googleLogin();o&&o.code===200?window.location.href=o.data:this.$notification.error({message:"Error",description:"Failed to get login url from Google"})}catch(o){this.$notification.error({message:"Error",description:o.message||"Failed to send verification code"})}},showForgotPassword(){this.isForgotPassword=!0,this.isLogin=!1},backToLogin(){this.isForgotPassword=!1,this.isLogin=!0,this.resetForm={email:"",code:"",newPassword:"",confirmPassword:""}},async sendResetCode(){if(!this.resetForm.email){this.$notification.error({message:"Error",description:"Please input your email first"});return}try{await h.sendEmailCode(this.resetForm.email,"forgot_password"),this.cooldown=60,this.cooldownTimer=setInterval(()=>{this.cooldown--,this.cooldown<=0&&clearInterval(this.cooldownTimer)},1e3),this.$notification.success({message:"Success",description:"Verification code has been sent to your email"})}catch(o){this.$notification.error({message:"Error",description:o.message||"Failed to send verification code"})}},validateConfirmResetPassword(o,e){return e?e!==this.resetForm.newPassword?Promise.reject("The two passwords do not match!"):Promise.resolve():Promise.reject("Please confirm your password!")},async handleResetPassword(){const{email:o,code:e,newPassword:c,confirmPassword:g}=this.resetForm;if(!o||!e||!c||!g){this.$notification.error({message:"Error",description:"Please fill in all fields"});return}this.loading=!0;try{const s=await h.resetPassword({email:o,code:e,newPassword:c,confirmPassword:g});s&&s.code===200&&(this.$notification.success({message:"Success",description:"Password reset successful, please use the new password to log in"}),this.backToLogin())}catch(s){this.$notification.error({message:"Error",description:s.message||"Password reset failed"})}finally{this.loading=!1}},encodeCredentials(o){return btoa(JSON.stringify(o))},decodeCredentials(o){return JSON.parse(atob(o))},async handleLogin(){var c,g;const{email:o,password:e}=this.form;if(!o||!e){this.$notification.error({message:"Login Error",description:"Please enter email and password"});return}this.loading=!0;try{const s=await h.login(o,e);if(s){if(s.code===401&&s.message==="Password incorrect"){this.$notification.error({message:"Login Failed",description:"Password incorrect, please check your email and password"});return}if(s.code===404&&s.message==="User not find"){this.$notification.error({message:"Login Failed",description:"User not found, please register first"});return}["accessToken","intelickIsLoggedIn","currentCustomerEmail","currentCustomerId"].forEach(l=>localStorage.removeItem(l)),localStorage.setItem("intelickIsLoggedIn","true"),localStorage.setItem("accessToken",s.accessToken),s.data.customerId&&(localStorage.setItem("currentCustomerEmail",s.data.email),localStorage.setItem("currentCustomerId",s.data.customerId)),I();const F={id:s.data.customerId,email:s.data.email,name:s.data.name||s.data.email,createdAt:Math.floor(new Date(s.data.createdAt).getTime()/1e3)};if(j(F),this.rememberMe){const l={email:o,password:e};localStorage.setItem("rememberedCredentials",this.encodeCredentials(l))}else localStorage.removeItem("rememberedCredentials");const w=s.data.onboarding?"/dashboard":"/onboarding";this.$router.push(w)}}catch(s){console.error("Login failed:",s),this.$notification.error({message:"Login Failed",description:((g=(c=s.response)==null?void 0:c.data)==null?void 0:g.message)||"Please check your email and password"})}finally{this.loading=!1}},toggleForm(){this.isLogin=!this.isLogin,this.loading=!1},validatePassword(o,e){const c=/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).{8,}$/;return e?c.test(e)?Promise.resolve():Promise.reject("Password must contain at least one uppercase letter, one lowercase letter, and one number"):Promise.reject("Please input your password!")},validateConfirmPassword(o,e){return e?e!==this.registerForm.password?Promise.reject("The two passwords do not match!"):Promise.resolve():Promise.reject("Please confirm your password!")},async sendCode(){if(!this.registerForm.email){this.$notification.error({message:"Error",description:"Please enter your email first"});return}try{if((await h.sendEmailCode(this.registerForm.email,"register")).code===1001){this.$notification.error({message:"Error",description:"This email is already registered"});return}this.cooldown=60,this.cooldownTimer=setInterval(()=>{this.cooldown--,this.cooldown<=0&&clearInterval(this.cooldownTimer)},1e3),this.$notification.success({message:"Success",description:"Verification code has been sent to your email"})}catch(o){this.$notification.error({message:"Error",description:o.message||"Failed to send verification code"})}},async handleRegister(){const{email:o,code:e,password:c,confirmPassword:g}=this.registerForm;if(!o||!e||!c||!g){this.$notification.error({message:"Error",description:"Please fill in all fields"});return}if(!/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).{8,}$/.test(c)){this.$notification.error({message:"Error",description:"Password must contain at least one uppercase letter, one lowercase letter, one number, and be at least 8 characters long"});return}if(c!==g){this.$notification.error({message:"Error",description:"Passwords do not match"});return}this.loading=!0;try{const t=await h.register({email:o,code:e,password:c});t&&t.code===200?(this.$notification.success({message:"Success",description:"Registration successful! Please login."}),this.registerForm={email:"",code:"",password:"",confirmPassword:""},this.isLogin=!0):t&&t.code===400&&t.message=="Invalid verification code"?this.$notification.error({message:"Error",description:"The verification code is incorrect. Please check and try again."}):t&&t.code===400&&t.message=="email already exists"&&this.$notification.error({message:"Error",description:"Email already registered"})}catch(t){this.$notification.error({message:"Error",description:t.message||"Registration failed"})}finally{this.loading=!1}},validateConfirmSetPassword(o,e){return e?e!==this.setPasswordForm.newPassword?Promise.reject("Two passwords do not match!"):Promise.resolve():Promise.reject("Please confirm password!")},async handleSetPassword(){const{newPassword:o,confirmPassword:e}=this.setPasswordForm;if(!o||!e){this.$notification.error({message:"Error",description:"Please fill in all fields"});return}this.setPasswordLoading=!0;try{const c=await h.changePassword({currentPassword:"",newPassword:o,confirmPassword:e});c&&c.code===200&&(this.$notification.success({message:"Success",description:"Password set successfully"}),this.showSetPasswordModal=!1,this.$router.push("/dashboard"))}catch(c){this.$notification.error({message:"Error",description:c.message||"Password set failed"})}finally{this.setPasswordLoading=!1}},async handleLogout(){I(),L()}},beforeUnmount(){this.cooldownTimer&&clearInterval(this.cooldownTimer)}},V={class:"login-container"},B={class:"logo-section"},N={class:"subtitle"},W={style:{display:"flex","justify-content":"space-between","align-items":"center"}},D={class:"register-prompt"},G={class:"email-verify-group"},Z={key:0,class:"password-strength"},K={class:"register-prompt"},O={class:"email-verify-group"},H={key:0,class:"password-strength"},J={class:"register-prompt"},Y={key:0,class:"password-strength"};function Q(o,e,c,g,s,t){const F=u("a-layout-sider"),w=u("a-input"),l=u("a-form-item"),f=u("a-input-password"),E=u("a-checkbox"),p=u("a-button"),y=u("a-form"),M=u("a-layout-content"),z=u("a-layout"),T=u("a-modal");return P(),b(U,null,[a(z,{style:{height:"100vh"}},{default:n(()=>[a(F,{width:"50%",class:"left-side"},{default:n(()=>e[18]||(e[18]=[r("div",{class:"slogan-container"},[r("div",{class:"brand-mark"},[r("div",{class:"glowing-circle"}),r("div",{class:"pulse-ring"})]),r("h1",{class:"main-slogan"},[r("span",{class:"gradient-text"},"AI-crafted Content"),r("br"),d("That Delivers Results. ")]),r("p",{class:"sub-slogan"}," Dominate search results and drive more traffic with AI-generated landing pages and blog posts that are optimized for your audience and search engines. "),r("div",{class:"feature-grid"},[r("div",{class:"feature-item"},[r("div",{class:"feature-icon"},[r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"feature-svg"},[r("path",{d:"M12 2L2 7L12 12L22 7L12 2Z"}),r("path",{d:"M2 17L12 22L22 17"}),r("path",{d:"M2 12L12 17L22 12"})])]),r("div",{class:"feature-text"},[d("AI-Powered"),r("br"),d("Content Creation")])]),r("div",{class:"feature-item"},[r("div",{class:"feature-icon"},[r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"feature-svg"},[r("circle",{cx:"12",cy:"12",r:"3"}),r("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})])]),r("div",{class:"feature-text"},[d("SEO-Optimized"),r("br"),d("Strategy")])]),r("div",{class:"feature-item"},[r("div",{class:"feature-icon"},[r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"feature-svg"},[r("path",{d:"M21 21H3L12 3l9 18z"}),r("path",{d:"M12 9v8"}),r("path",{d:"M8 17h8"})])]),r("div",{class:"feature-text"},[d("Drive Organic"),r("br"),d("Traffic")])])])],-1),r("div",{class:"animated-shapes"},[r("div",{class:"shape circle"}),r("div",{class:"shape square"}),r("div",{class:"shape triangle"}),r("div",{class:"floating-dots"})],-1),r("div",{class:"bottom-decoration"},[r("div",{class:"wave-pattern"})],-1)])),_:1}),a(M,{class:"right-side"},{default:n(()=>[r("div",V,[r("div",B,[e[19]||(e[19]=r("h2",{class:"app-title"},[r("span",{class:"website-text"},"Website"),r("span",{class:"lm-text"},"LM"),r("span",{class:"title-emoji"},"\u2726")],-1)),r("p",N,m(s.isForgotPassword?"Reset Your Account Password":s.isLogin?"Create Content At Ease":"Get An Account For Start"),1)]),s.isLogin?(P(),S(y,{key:0,layout:"vertical",onSubmit:k(t.handleLogin,["prevent"])},{default:n(()=>[a(l,{label:"Email"},{default:n(()=>[a(w,{value:s.form.email,"onUpdate:value":e[0]||(e[0]=i=>s.form.email=i),placeholder:"Enter your email",size:"large",class:"custom-input",onKeydown:_(t.handleLogin,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(l,{label:"Password"},{default:n(()=>[a(f,{value:s.form.password,"onUpdate:value":e[1]||(e[1]=i=>s.form.password=i),placeholder:"Enter your password",size:"large",class:"custom-input",onKeydown:_(t.handleLogin,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(l,null,{default:n(()=>[r("div",W,[a(E,{checked:s.rememberMe,"onUpdate:checked":e[2]||(e[2]=i=>s.rememberMe=i)},{default:n(()=>e[20]||(e[20]=[d("Remember me")])),_:1},8,["checked"]),r("a",{onClick:e[3]||(e[3]=(...i)=>t.showForgotPassword&&t.showForgotPassword(...i)),class:"forgot-password-link"},"Forgot Password?")])]),_:1}),a(l,null,{default:n(()=>[a(p,{type:"primary",block:"",size:"large",onClick:t.handleLogin,class:"login-button",loading:s.loading},{default:n(()=>[d(m(s.loading?"Logging in...":"Login"),1)]),_:1},8,["onClick","loading"])]),_:1}),e[23]||(e[23]=r("div",{class:"divider"},[r("span",{class:"divider-text"},"or")],-1)),a(p,{block:"",size:"large",class:"google-login-button",onClick:t.handleGoogleLogin},{default:n(()=>e[21]||(e[21]=[r("img",{src:"https://www.google.com/favicon.ico",alt:"Google",class:"google-icon"},null,-1),d(" Continue with Google ")])),_:1},8,["onClick"]),r("div",D,[e[22]||(e[22]=d(" Don't have an account? ")),r("a",{onClick:e[4]||(e[4]=(...i)=>t.toggleForm&&t.toggleForm(...i))},"Register now")])]),_:1},8,["onSubmit"])):v("",!0),s.isForgotPassword?(P(),S(y,{key:1,layout:"vertical",onSubmit:k(t.handleResetPassword,["prevent"])},{default:n(()=>[a(l,{label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please input a valid email!"}]},{default:n(()=>[r("div",G,[a(w,{value:s.resetForm.email,"onUpdate:value":e[5]||(e[5]=i=>s.resetForm.email=i),placeholder:"Please input your email",size:"large",class:"custom-input"},null,8,["value"]),a(p,{onClick:t.sendResetCode,disabled:s.cooldown>0,size:"large",class:"verify-code-btn"},{default:n(()=>[d(m(s.cooldown>0?`${s.cooldown}s`:"Send"),1)]),_:1},8,["onClick","disabled"])])]),_:1}),a(l,{label:"Code",rules:[{required:!0,message:"Please input verification code!"}]},{default:n(()=>[a(w,{value:s.resetForm.code,"onUpdate:value":e[6]||(e[6]=i=>s.resetForm.code=i),placeholder:"Please input verification code",size:"large",class:"custom-input"},null,8,["value"])]),_:1}),a(l,{label:"New Password",rules:[{required:!0,message:"Please input new password!"},{validator:t.validatePassword}]},{default:n(()=>[a(f,{value:s.resetForm.newPassword,"onUpdate:value":e[7]||(e[7]=i=>s.resetForm.newPassword=i),placeholder:"Please input new password",size:"large",class:"custom-input"},null,8,["value"]),s.resetForm.newPassword?(P(),b("div",Z,[e[24]||(e[24]=d(" Password Strength: ")),r("span",{class:C(t.forgotPasswordStrengthClass)},m(t.forgotPasswordStrength),3)])):v("",!0)]),_:1},8,["rules"]),a(l,{label:"Confirm Password",rules:[{required:!0,message:"Please confirm your password!"},{validator:t.validateConfirmResetPassword}]},{default:n(()=>[a(f,{value:s.resetForm.confirmPassword,"onUpdate:value":e[8]||(e[8]=i=>s.resetForm.confirmPassword=i),placeholder:"Please confirm your password",size:"large",class:"custom-input"},null,8,["value"])]),_:1},8,["rules"]),a(l,null,{default:n(()=>[a(p,{type:"primary",block:"",size:"large",onClick:t.handleResetPassword,class:"login-button",loading:s.loading},{default:n(()=>[d(m(s.loading?"Resetting...":"Reset Password"),1)]),_:1},8,["onClick","loading"])]),_:1}),r("div",K,[r("a",{onClick:e[9]||(e[9]=(...i)=>t.backToLogin&&t.backToLogin(...i))},"Back to Login")])]),_:1},8,["onSubmit"])):v("",!0),!s.isLogin&&!s.isForgotPassword?(P(),S(y,{key:2,layout:"vertical",onSubmit:k(t.handleRegister,["prevent"])},{default:n(()=>[a(l,{label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please input a valid email!"}]},{default:n(()=>[r("div",O,[a(w,{value:s.registerForm.email,"onUpdate:value":e[10]||(e[10]=i=>s.registerForm.email=i),placeholder:"Enter your email",size:"large",class:"custom-input"},null,8,["value"]),a(p,{onClick:t.sendCode,disabled:s.cooldown>0,size:"large",class:"verify-code-btn"},{default:n(()=>[d(m(s.cooldown>0?`${s.cooldown}s`:"Send"),1)]),_:1},8,["onClick","disabled"])])]),_:1}),a(l,{label:"Verification Code",rules:[{required:!0,message:"Please input verification code!"}]},{default:n(()=>[a(w,{value:s.registerForm.code,"onUpdate:value":e[11]||(e[11]=i=>s.registerForm.code=i),placeholder:"Enter verification code",size:"large",class:"custom-input"},null,8,["value"])]),_:1}),a(l,{label:"Password",rules:[{required:!0,message:"Please input your password!"},{validator:t.validatePassword}]},{default:n(()=>[a(f,{value:s.registerForm.password,"onUpdate:value":e[12]||(e[12]=i=>s.registerForm.password=i),placeholder:"Enter password",size:"large",class:"custom-input"},null,8,["value"]),s.registerForm.password?(P(),b("div",H,[e[25]||(e[25]=d(" Password Strength: ")),r("span",{class:C(t.passwordStrengthClass)},m(t.passwordStrength),3)])):v("",!0)]),_:1},8,["rules"]),a(l,{label:"Confirm Password",rules:[{required:!0,message:"Please confirm your password!"},{validator:t.validateConfirmPassword}]},{default:n(()=>[a(f,{value:s.registerForm.confirmPassword,"onUpdate:value":e[13]||(e[13]=i=>s.registerForm.confirmPassword=i),placeholder:"Confirm password",size:"large",class:"custom-input"},null,8,["value"])]),_:1},8,["rules"]),a(l,null,{default:n(()=>[a(p,{type:"primary",block:"",size:"large",onClick:t.handleRegister,class:"login-button",loading:s.loading},{default:n(()=>[d(m(s.loading?"Registering...":"Register"),1)]),_:1},8,["onClick","loading"])]),_:1}),r("div",J,[e[26]||(e[26]=d(" Already have an account? ")),r("a",{onClick:e[14]||(e[14]=(...i)=>t.toggleForm&&t.toggleForm(...i))},"Login now")])]),_:1},8,["onSubmit"])):v("",!0)])]),_:1})]),_:1}),a(T,{visible:s.showSetPasswordModal,"onUpdate:visible":e[17]||(e[17]=i=>s.showSetPasswordModal=i),title:"Set Password",closable:!1,maskClosable:!1,keyboard:!1,footer:null,width:"400px"},{default:n(()=>[a(y,{layout:"vertical",onSubmit:k(t.handleSetPassword,["prevent"])},{default:n(()=>[a(l,{label:"New Password",rules:[{required:!0,message:"Please input new password!"},{validator:t.validatePassword}]},{default:n(()=>[a(f,{value:s.setPasswordForm.newPassword,"onUpdate:value":e[15]||(e[15]=i=>s.setPasswordForm.newPassword=i),placeholder:"Please input new password",size:"large",class:"custom-input"},null,8,["value"]),s.setPasswordForm.newPassword?(P(),b("div",Y,[e[27]||(e[27]=d(" Password Strength: ")),r("span",{class:C(t.setPasswordStrengthClass)},m(t.setPasswordStrength),3)])):v("",!0)]),_:1},8,["rules"]),a(l,{label:"Confirm Password",rules:[{required:!0,message:"Please confirm password!"},{validator:t.validateConfirmSetPassword}]},{default:n(()=>[a(f,{value:s.setPasswordForm.confirmPassword,"onUpdate:value":e[16]||(e[16]=i=>s.setPasswordForm.confirmPassword=i),placeholder:"Please confirm password",size:"large",class:"custom-input"},null,8,["value"])]),_:1},8,["rules"]),a(l,null,{default:n(()=>[a(p,{type:"primary",block:"",size:"large",onClick:t.handleSetPassword,class:"login-button",loading:s.setPasswordLoading},{default:n(()=>[d(m(s.setPasswordLoading?"Setting...":"Set Password"),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["visible"])],64)}const ee=x(q,[["render",Q],["__scopeId","data-v-ca071c5b"]]);export{ee as default};
