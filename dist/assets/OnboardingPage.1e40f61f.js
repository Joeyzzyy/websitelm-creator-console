import{q as O,r as p,C as F,x as V,z as Z,c as a,f as e,ak as g,k as n,b as f,w as E,t as d,g as b,F as I,p as L,aa as m,T as A,a as H,d as U,u as q,e as o,_ as D}from"./index.3dd1b234.js";const G={class:"min-h-screen bg-gradient-to-br from-[#4B89FF]/5 via-[#6C9AFF]/5 to-[#4B89FF]/5"},J={class:"relative min-h-screen flex items-center justify-center p-12"},K={class:"w-full max-w-6xl"},Q={class:"bg-white/70 backdrop-blur-lg rounded-3xl p-12 shadow-xl border border-blue-100/50"},X={key:0,class:"chat-message assistant"},Y={key:1,class:"chat-message user"},ee={class:"message"},te={key:2,class:"chat-message user"},se={class:"message-wrapper"},ae={class:"message"},oe={key:3,class:"chat-message assistant"},le={key:4,class:"chat-message user"},ie={class:"message"},re={key:5,class:"chat-message user"},ne={class:"message-wrapper"},ue={class:"message"},ce={key:6,class:"chat-message assistant"},de={key:7,class:"chat-message user"},pe={class:"message w-full max-w-4xl"},me={class:"space-y-6"},ve={class:"competitors-list"},ge=["onClick"],fe={key:0,class:"competitor-input-group"},be={class:"flex items-center justify-between mt-4"},ye={class:"text-base text-gray-500"},he={key:8,class:"chat-message user"},we={class:"message-wrapper"},_e={class:"message"},xe={class:"competitors-summary"},ke={class:"competitor-list-summary"},Pe={key:9,class:"chat-message assistant"},Ce={class:"message"},Ne=["disabled"],Fe={key:0,class:"btn-loading"},Ee={key:0,class:"mt-4"},Ie={class:"text-xs text-gray-500 mb-2"},Le={class:"flex items-center gap-2"},Ae={key:0,class:"typing-indicator"},Ue=O({__name:"OnboardingPage",setup(Re){const R=q(),y=p(null),c=p(1),h=p(!1),x=p(!1),l=p([]),j=p(null),s=F({productName:"",website:"",competitors:[]}),u=F({name:"",url:""}),C=p(null),S=V(()=>{switch(c.value){case 1:return"Press Enter to confirm your product name";case 2:return"Press Enter to confirm your website URL";case 3:return"Fill in both fields and press Enter to add a competitor";default:return""}}),v=async()=>{await A(),y.value&&(y.value.scrollTop=y.value.scrollHeight)},k=async()=>{x.value=!0,await new Promise(i=>setTimeout(i,1e3)),x.value=!1},T=async()=>{if(!s.productName.trim()){m.warning("Please enter your product name");return}await k(),l.value.push("productName"),c.value=2,v()},W=async()=>{if(!s.website.trim()){m.warning("Please enter your website URL");return}if(!/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/.test(s.website.trim())){m.warning("Please enter a valid website URL");return}s.competitors.length===0&&(s.competitors=[]),await k(),l.value.push("website"),c.value=3,v()},$=async()=>{if(!u.name.trim()||!u.url.trim()){m.warning("Please fill in both competitor name and URL");return}s.competitors.push({name:u.name,url:u.url}),u.name="",u.url="",await v(),s.competitors.length===4?await N():A(()=>{var i;(i=C.value)==null||i.focus()})},N=async()=>{if(s.competitors.length===0){m.warning("Please add at least one competitor to continue");return}await k(),l.value.push("competitors"),v()},z=i=>{s.competitors.splice(i,1),s.competitors.length===0&&(l.value=l.value.filter(t=>t!=="competitors"))},B=async()=>{h.value=!0;try{const i=await H.createProduct({customerId:localStorage.getItem("currentCustomerId"),productName:s.productName,website:s.website,competeProduct:s.competitors.filter(t=>t.name&&t.url).map(t=>`${t.name}|${t.url}`).join(","),sitemap:"",domainStatus:!1});(i==null?void 0:i.code)===200&&(m.success("Setup completed successfully!"),R.push("/dashboard"))}catch(i){console.error("Setup failed:",i),m.error("Failed to complete setup. Please try again.")}finally{h.value=!1}},P=i=>{switch(j.value=i,i){case"productName":c.value=1,l.value=[],s.website="",s.competitors=[];break;case"website":c.value=2,l.value=l.value.filter(t=>t==="productName"),s.competitors=[];break;case"competitors":c.value=3,l.value=l.value.filter(t=>t==="productName"||t==="website");break}v()};return Z(l,()=>{v()}),(i,t)=>{const w=U("a-input"),M=U("a-input-group");return o(),a("div",G,[t[24]||(t[24]=e("div",{class:"fixed inset-0 overflow-hidden pointer-events-none"},[e("div",{class:"absolute top-0 right-0 w-[1200px] h-[1200px] bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e("div",{class:"absolute bottom-0 left-0 w-[1200px] h-[1200px] bg-gradient-to-tr from-blue-500/10 to-purple-500/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})],-1)),e("div",J,[e("div",K,[e("div",Q,[e("div",{class:"space-y-10 mb-8 max-h-[70vh] overflow-y-auto px-6",ref_key:"chatContainer",ref:y},[t[22]||(t[22]=e("div",{class:"chat-message assistant"},[e("div",{class:"avatar"},[e("img",{src:g,alt:"WebsiteLM AI",class:"w-full h-full object-contain p-1.5"})]),e("div",{class:"message"}," Hi there! I'm here to help you set up your product. Let's get started! \u{1F44B} ")],-1)),l.value.length>=1?(o(),a("div",X,t[7]||(t[7]=[e("div",{class:"avatar"},[e("img",{src:g,alt:"WebsiteLM AI",class:"w-full h-full object-contain p-1.5"})],-1),e("div",{class:"message"}," First, what's the name of your product or service? \u{1F680} ",-1)]))):n("",!0),c.value===1?(o(),a("div",Y,[e("div",ee,[f(w,{value:s.productName,"onUpdate:value":t[0]||(t[0]=r=>s.productName=r),placeholder:"Enter your product name...",class:"chat-input",onPressEnter:T,maxLength:50},{prefix:E(()=>t[8]||(t[8]=[e("i",{class:"fas fa-rocket text-gray-400"},null,-1)])),_:1},8,["value"])])])):n("",!0),l.value.includes("productName")?(o(),a("div",te,[e("div",se,[e("div",ae,d(s.productName),1),e("button",{onClick:t[1]||(t[1]=r=>P("productName")),class:"edit-button",title:"Edit product name"},t[9]||(t[9]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]))])])):n("",!0),l.value.includes("productName")?(o(),a("div",oe,t[10]||(t[10]=[e("div",{class:"avatar"},[e("img",{src:g,alt:"WebsiteLM AI",class:"w-full h-full object-contain p-1.5"})],-1),e("div",{class:"message"}," Great! Now, what's your website URL? \u{1F310} ",-1)]))):n("",!0),c.value===2?(o(),a("div",le,[e("div",ie,[f(M,{compact:"",class:"website-input-group"},{default:E(()=>[t[11]||(t[11]=e("span",{class:"website-prefix"},[e("i",{class:"fas fa-globe mr-2"}),b(" https:// ")],-1)),f(w,{value:s.website,"onUpdate:value":t[2]||(t[2]=r=>s.website=r),placeholder:"example.com",class:"chat-input",onPressEnter:W},null,8,["value"])]),_:1})])])):n("",!0),l.value.includes("website")?(o(),a("div",re,[e("div",ne,[e("div",ue," https://"+d(s.website),1),e("button",{onClick:t[3]||(t[3]=r=>P("website")),class:"edit-button",title:"Edit website URL"},t[12]||(t[12]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]))])])):n("",!0),l.value.includes("website")?(o(),a("div",ce,t[13]||(t[13]=[e("div",{class:"avatar"},[e("img",{src:g,alt:"WebsiteLM AI",class:"w-full h-full object-contain p-1.5"})],-1),e("div",{class:"message"},[b(" Please share the websites of your successful competitors or industry peers. We'll analyze their SEO keywords to help you identify gaps, optimize your keyword strategy, and accelerate your traffic growth! \u{1F680} "),e("div",{class:"text-sm text-gray-500 mt-2"}," Add up to 4 competitors. Press Enter after each one. ")],-1)]))):n("",!0),c.value===3?(o(),a("div",de,[e("div",pe,[e("div",me,[e("div",ve,[s.competitors&&s.competitors.length>0?(o(!0),a(I,{key:0},L(s.competitors,(r,_)=>(o(),a("div",{key:_,class:"competitor-tag"},[b(d(r.name)+" ("+d(r.url)+") ",1),e("button",{onClick:je=>z(_),class:"remove-btn"},t[14]||(t[14]=[e("i",{class:"fas fa-times"},null,-1)]),8,ge)]))),128)):n("",!0)]),s.competitors.length<4?(o(),a("div",fe,[f(w,{value:u.name,"onUpdate:value":t[4]||(t[4]=r=>u.name=r),placeholder:"Competitor name",class:"competitor-input",ref_key:"competitorNameInput",ref:C},null,8,["value"]),f(w,{value:u.url,"onUpdate:value":t[5]||(t[5]=r=>u.url=r),placeholder:"Website URL",class:"competitor-input",onPressEnter:$},null,8,["value"])])):n("",!0),e("div",be,[e("div",ye,d(s.competitors.length===0?"At least 1 competitor is required. Press Enter to add.":s.competitors.length<4?`Press Enter to add competitor (${4-s.competitors.length} more can be added)`:"Maximum competitors reached"),1),s.competitors.length>0?(o(),a("button",{key:0,onClick:N,class:"complete-competitors-btn"},t[15]||(t[15]=[e("span",null,"Complete",-1),e("i",{class:"fas fa-arrow-right ml-2"},null,-1)]))):n("",!0)])])])])):n("",!0),l.value.includes("competitors")?(o(),a("div",he,[e("div",we,[e("div",_e,[e("div",xe,[t[16]||(t[16]=b(" Added competitors: ")),e("div",ke,[(o(!0),a(I,null,L(s.competitors,(r,_)=>(o(),a("div",{key:_,class:"competitor-item"},d(r.name)+" ("+d(r.url)+") ",1))),128))])])]),e("button",{onClick:t[6]||(t[6]=r=>P("competitors")),class:"edit-button",title:"Edit competitors"},t[17]||(t[17]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]))])])):n("",!0),l.value.includes("competitors")?(o(),a("div",Pe,[t[21]||(t[21]=e("div",{class:"avatar"},[e("img",{src:g,alt:"WebsiteLM AI",class:"w-full h-full object-contain p-1.5"})],-1)),e("div",Ce,[t[20]||(t[20]=b(" Perfect! I have everything I need. Ready to set up your product? \u{1F389} ")),e("button",{onClick:B,disabled:h.value,class:"complete-setup-btn"},[t[19]||(t[19]=e("span",{class:"btn-content"},[e("span",{class:"btn-text"},"Complete Setup"),e("span",{class:"btn-icon"},[e("i",{class:"fas fa-arrow-right"})])],-1)),h.value?(o(),a("span",Fe,t[18]||(t[18]=[e("span",null,null,-1),e("span",null,null,-1),e("span",null,null,-1)]))):n("",!0)],8,Ne)])])):n("",!0)],512),l.value.includes("competitors")?n("",!0):(o(),a("div",Ee,[e("div",Ie,d(S.value),1),e("div",Le,[x.value?(o(),a("div",Ae,t[23]||(t[23]=[e("span",null,null,-1),e("span",null,null,-1),e("span",null,null,-1)]))):n("",!0)])]))])])])])}}});const Te=D(Ue,[["__scopeId","data-v-85047c9e"]]);export{Te as default};
