import{_ as u,a as m,h as p,w as l,d,e as h,b as f,f as t}from"./index.3dd1b234.js";import{s as _,a as b}from"./intercom.2debaa95.js";const w={name:"GoogleCallback",data(){return{}},async created(){var r,s,c;try{const o=new URLSearchParams(window.location.search),a=o.get("code"),i=o.get("state");if(!a)throw new Error("Authorization code not received");const e=await m.googleCallback(a,i);if(e&&e.code===200){localStorage.clear(),localStorage.setItem("intelickIsLoggedIn","true"),localStorage.setItem("accessToken",e.accessToken),(r=e.data)!=null&&r.customerId&&(localStorage.setItem("currentCustomerEmail",e.data.email),localStorage.setItem("currentCustomerId",e.data.customerId)),_();const n={id:e.data.customerId,email:e.data.email,name:e.data.name||e.data.email,createdAt:Math.floor(new Date(e.data.createdAt).getTime()/1e3)};b(n),this.$notification.success({message:"Welcome!",description:"Successfully logged in with Google"});const g=e.data.onboarding?"/dashboard":"/onboarding";this.$router.push(g)}else throw new Error((e==null?void 0:e.message)||"Authentication failed")}catch(o){let a="Failed to complete Google authentication";if(o.response)switch((s=o.response.data)==null?void 0:s.code){case 401:a="Authentication failed. Please try again";break;case 404:a="User not found. Please try again";break;default:a=((c=o.response.data)==null?void 0:c.message)||"Google login failed"}this.$notification.error({message:"Authentication Failed",description:a}),setTimeout(()=>{this.$router.push("/login")},2e3)}}};function x(r,s,c,o,a,i){const e=d("a-layout-content"),n=d("a-layout");return h(),p(n,{style:{height:"100vh",background:"linear-gradient(135deg, #E8F0FF 0%, #C7D9FF 100%)"}},{default:l(()=>[f(e,{style:{display:"flex","align-items":"center","justify-content":"center",height:"100%",padding:"20px"}},{default:l(()=>s[0]||(s[0]=[t("div",{class:"callback-container",style:{width:"400px",padding:"40px",background:"rgba(255, 255, 255, 0.95)","border-radius":"24px","box-shadow":"0 8px 32px rgba(108, 152, 255, 0.15)",border:"1px solid rgba(108, 152, 255, 0.2)"}},[t("div",{class:"logo-section"},[t("h2",{class:"app-title"},[t("span",{class:"website-text"},"Website"),t("span",{class:"lm-text"},"LM"),t("span",{class:"title-emoji"},"\u2726")])]),t("div",{class:"redirect-message"},[t("h3",{class:"redirect-title"},"Welcome aboard!"),t("p",{class:"redirect-text"},"Successfully authenticated with Google"),t("p",{class:"redirect-subtext"},"Redirecting you to dashboard...")])],-1)])),_:1})]),_:1})}const I=u(w,[["render",x],["__scopeId","data-v-7204727f"]]);export{I as default};
